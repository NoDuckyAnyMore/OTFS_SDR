% Copyright (c) 2021, KDDI Research, Inc. and KDDI Corp. All rights reserved.

function symMap = getconstellation(modulationOrder)
mappingType = 'LTE';
switch mappingType
    case 'LTE'
        % Defined in TS36.211 Section 7.1
        if modulationOrder==4
            symMap = [ 2 0 ...
                       3 1 ];
        elseif modulationOrder==16
            symMap = [11  9  1  3 ...
                      10  8  0  2 ...
                      14 12  4  6 ...
                      15 13  5  7 ];
            % 1011 1001 0001 0011
            % 1010 1000 0000 0010
            % 1110 1100 0100 0110
            % 1111 1101 0101 0111
        elseif modulationOrder==64
            symMap = [47 45 37 39  7  5 13 15 ...
                      46 44 36 38  6  4 12 14 ...
                      42 40 32 34  2  0  8 10 ...
                      43 41 33 35  3  1  9 11 ...
                      59 57 49 51 19 17 25 27 ...
                      58 56 48 50 18 16 24 26 ...
                      62 60 52 54 22 20 28 30 ...
                      63 61 53 55 23 21 29 31 ];
            % 101111 101101 100101 100111   000111 000101 001101 001111
            % 101110 101100 100100 100110   000110 000100 001100 001110
            % 101010 101000 100000 100010   000010 000000 001000 001010
            % 101011 101001 100001 100011   000011 000001 001001 001011
            % 
            % 111011 111001 110001 110011   010011 010001 011001 011011
            % 111010 111000 110000 110010   010010 010000 011000 011010
            % 111110 111100 110100 110110   010110 010100 011100 011110
            % 111111 111101 110101 110111   010111 010101 011101 011111
        elseif modulationOrder==256
           symMap = ( [127	126	122	123	107	106	110	111	47	46	42	43	59	58	62	63 ...
                       125	124	120	121	105	104	108	109	45	44	40	41	57	56	60	61 ...
                       117	116	112	113	97	96	100	101	37	36	32	33	49	48	52	53 ...
                       119	118	114	115	99	98	102	103	39	38	34	35	51	50	54	55 ...
                       87	86	82	83	67	66	70	71	7	6	2	3	19	18	22	23 ...
                       85	84	80	81	65	64	68	69	5	4	0	1	17	16	20	21 ...
                       93	92	88	89	73	72	76	77	13	12	8	9	25	24	28	29 ...
                       95	94	90	91	75	74	78	79	15	14	10	11	27	26	30	31 ...
                       223	222	218	219	203	202	206	207	143	142	138	139	155	154	158	159 ...
                       221	220	216	217	201	200	204	205	141	140	136	137	153	152	156	157 ...
                       213	212	208	209	193	192	196	197	133	132	128	129	145	144	148	149 ...
                       215	214	210	211	195	194	198	199	135	134	130	131	147	146	150	151 ...
                       247	246	242	243	227	226	230	231	167	166	162	163	179	178	182	183 ...
                       245	244	240	241	225	224	228	229	165	164	160	161	177	176	180	181 ...
                       253	252	248	249	233	232	236	237	173	172	168	169	185	184	188	189 ...
                       255	254	250	251	235	234	238	239	175	174	170	171	187	186	190	191]);

        else
            error('unsupported modulation order');
        end
    case 'Other'
        if modulationOrder==4
            symMap = [ 2 3 ...
                       0 1 ];
        elseif modulationOrder==16
            symMap = [ 4  6  7  5 ...
                      12 14 15 13 ...
                       8 10 11  9 ...
                       0  2  3  1 ];
        elseif modulationOrder==64
            symMap = [47 46 42 43 59 58 62 63 ...
                      45 44 40 41 57 56 60 61 ...
                      37 36 32 33 49 48 52 53 ...
                      39 38 34 35 51 50 54 55 ...
                       7  6  2  3 19 18 22 23 ...
                       5  4  0  1 17 16 20 21 ...
                      13 12  8  9 25 24 28 29 ...
                      15 14 10 11 27 26 30 31 ];
        elseif modulationOrder==256
            symMap = [  191 190 186 187 171 170 174 175 239 238 234 235 251 250 254 255 ...
                        189 188 184 185 169 168 172 173 237 236 232 233 249 248 252 253 ...
                        181 180 176 177 161 160 164 165 229 228 224 225 241 240 244 245 ...
                        183 182 178 179 163 162 166 167 231 230 226 227 243 242 246 247 ...
                        151 150 146 147 131 130 134 135 199 198 194 195 211 210 214 215 ...
                        149 148 144 145 129 128 132 133 197 196 192 193 209 208 212 213 ...
                        157 156 152 153 137 136 140 141 205 204 200 201 217 216 220 221 ...
                        159 158 154 155 139 138 142 143 207 206 202 203 219 218 222 223 ...
                         31  30  26  27  11  10  14  15  79  78  74  75  91  90  94  95 ...
                         29  28  24  25   9   8  12  13  77  76  72  73  89  88  92  93 ...
                         21  20  16  17   1   0   4   5  69  68  64  65  81  80  84  85 ...
                         23  22  18  19   3   2   6   7  71  70  66  67  83  82  86  87 ...
                         55  54  50  51  35  34  38  39 103 102  98  99 115 114 118 119 ...
                         53  52  48  49  33  32  36  37 101 100  96  97 113 112 116 117 ...
                         61  60  56  57  41  40  44  45 109 108 104 105 121 120 124 125 ...
                         63  62  58  59  43  42  46  47 111 110 106 107 123 122 126 127 ];
        else
            error('unsupported modulation order');
        end
        
end